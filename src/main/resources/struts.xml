<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
        "http://struts.apache.org/dtds/struts-2.5.dtd">
<struts>
    <constant name="struts.custom.i18n.resources" value="messages"/>
    <constant name="struts.ognl.allowStaticMethodAccess" value="true"/>
    <constant name="struts.xwork.chaining.copyFieldErrors" value="true"/>
    <package name="default" extends="struts-default" namespace="/">
        <global-results>
            <result name="notLoggedIn" type="freemarker">templates/not-logged-in-errorpage.ftl</result>
            <result name="alreadyLoggedIn" type="freemarker">templates/already-logged-in-errorpage.ftl</result>
            <result name="insufficientPermissions" type="freemarker">templates/insufficient-permissions-errorpage.ftl
            </result>
            <result name="alreadyEnrolled" type="freemarker">templates/already-enrolled-errorpage.ftl</result>
            <result name="testAlreadyStarted" type="freemarker">templates/test-already-started-errorpage.ftl</result>
            <result name="genericError" type="freemarker">templates/generic-errorpage.ftl</result>
        </global-results>

        <global-exception-mappings>
            <exception-mapping exception="de.nordakademie.multiplechoice.exception.NotLoggedInException"
                               result="notLoggedIn"/>
            <exception-mapping exception="de.nordakademie.multiplechoice.exception.AlreadyLoggedInException"
                               result="alreadyLoggedIn"/>
            <exception-mapping exception="de.nordakademie.multiplechoice.exception.InsufficientPermissionsException"
                               result="insufficientPermissions"/>
            <exception-mapping exception="de.nordakademie.multiplechoice.exception.AlreadyEnrolledException"
                               result="alreadyEnrolled"/>
            <exception-mapping exception="de.nordakademie.multiplechoice.exception.TestAlreadyStartedException"
                               result="testAlreadyStarted"/>
            <exception-mapping exception="de.nordakademie.multiplechoice.exception.GenericErrorException"
                               result="genericError"/>
        </global-exception-mappings>


        <action name="">
            <result type="redirect">home</result>
        </action>
        <action name="home" class="de.nordakademie.multiplechoice.action.HomeAction">
            <result type="freemarker">templates/home.ftl</result>
        </action>
        <action name="impressum">
            <result type="freemarker">templates/impressum.ftl</result>
        </action>
        <action name="logout" class="de.nordakademie.multiplechoice.action.LogoutAction" method="logOut">
            <result type="freemarker">templates/logout.ftl</result>
        </action>
        <action name="testAdministration">
            <result type="freemarker">templates/testAdministration.ftl</result>
        </action>
        <action name="results">
            <result type="freemarker">templates/results.ftl</result>
        </action>
        <action name="chooseSeminar">
            <result type="freemarker">templates/chooseSeminar.ftl</result>
        </action>
        <action name="add-test-form" class="de.nordakademie.multiplechoice.action.TestFormAction" method="openAddForm">
            <interceptor-ref name="chain"/>
            <interceptor-ref name="basicStack"/>
            <result type="freemarker">templates/add-test.ftl</result>
        </action>
        <action name="add-test" class="de.nordakademie.multiplechoice.action.PersistTestAction" method="persistTest">
            <result type="chain">home</result>
            <result name="input" type="chain">add-test-form</result>
        </action>
        <action name="edit-test-form" class="de.nordakademie.multiplechoice.action.TestFormAction" method="openEditForm">
            <interceptor-ref name="chain"/>
            <interceptor-ref name="basicStack"/>
            <result type="freemarker">templates/edit-test.ftl</result>
        </action>
        <action name="edit-test" class="de.nordakademie.multiplechoice.action.PersistTestAction" method="persistTest">
            <result type="chain">home</result>
            <result name="input" type="chain">edit-test-form</result>
        </action>
        <action name="addQuestion-form" class="de.nordakademie.multiplechoice.action.QuestionFormAction"
                method="openForm">
            <result type="freemarker">templates/addQuestion-form.ftl</result>
        </action>
        <action name="addQuestion" class="de.nordakademie.multiplechoice.action.AddQuestionAction" method="addQuestion">
            <result type="freemarker">templates/impressum.ftl</result>
            <result name="input" type="freemarker">templates/addQuestion-form.ftl</result>
        </action>
        <action name="performTest">
            <result type="freemarker">templates/performTest.ftl</result>
        </action>
        <action name="contact">
            <result type="freemarker">templates/contact.ftl</result>
        </action>
        <action name="login-form">
            <result type="freemarker">templates/login-form.ftl</result>
        </action>
        <action name="login" class="de.nordakademie.multiplechoice.action.LoginAction" method="login">
            <result type="chain">home</result>
            <result name="input" type="freemarker">templates/login-form.ftl</result>
        </action>
        <action name="registration-form">
            <result type="freemarker">templates/registration-form.ftl</result>
        </action>
        <action name="register" class="de.nordakademie.multiplechoice.action.RegistrationAction" method="register">
            <result type="freemarker">templates/registration-step1-complete.ftl</result>
            <result name="mailError" type="freemarker">templates/registration-step1-error.ftl</result>
            <result name="input" type="freemarker">templates/registration-form.ftl</result>
        </action>
        <action name="acceptRegistration" class="de.nordakademie.multiplechoice.action.RegistrationAcceptationAction"
                method="acceptRegistration">
            <result type="freemarker">templates/registration-step2-complete.ftl</result>
            <result name="emptyRegCodeError" type="freemarker">templates/registration-step2-error.ftl</result>
        </action>
        <action name="add-seminar-form" class="de.nordakademie.multiplechoice.action.SeminarFormAction" method="openAddForm">
            <result type="freemarker">templates/add-seminar-form.ftl</result>
        </action>
        <action name="edit-seminar-form" class="de.nordakademie.multiplechoice.action.SeminarFormAction" method="openEditForm">
            <interceptor-ref name="chain"/>
            <interceptor-ref name="basicStack"/>
            <result type="freemarker">templates/edit-seminar-form.ftl</result>
        </action>
        <action name="add-seminar" class="de.nordakademie.multiplechoice.action.PersistSeminarAction" method="persistSeminar">
            <result type="chain">home</result>
            <result name="input" type="freemarker">templates/add-seminar-form.ftl</result>
        </action>
        <action name="edit-seminar" class="de.nordakademie.multiplechoice.action.PersistSeminarAction" method="persistSeminar">
            <result type="chain">home</result>
            <result name="input" type="chain">edit-seminar-form</result>
        </action>
        <action name="seminar-list" class="de.nordakademie.multiplechoice.action.SeminarListAction"
                method="displaySeminarList">
            <result type="freemarker">templates/seminar-list.ftl</result>
        </action>
        <action name="seminar-detail" class="de.nordakademie.multiplechoice.action.SeminarDetailAction"
                method="displaySeminarDetail">
            <result type="freemarker">templates/seminar-detail.ftl</result>
        </action>
        <action name="enroll-seminar" class="de.nordakademie.multiplechoice.action.EnrollSeminarAction" method="enroll">
            <result type="chain">seminar-list</result>
        </action>
        <action name="not-logged-in-errorpage">
            <result type="freemarker">templates/not-logged-in-errorpage.ftl</result>
        </action>
        <action name="already-logged-in-errorpage">
            <result type="freemarker">templates/already-logged-in-errorpage.ftl</result>
        </action>
        <action name="insufficient-permissions-errorpage">
            <result type="freemarker">templates/insufficient-permissions-errorpage.ftl</result>
        </action>
        <action name="already-enrolled-errorpage">
            <result type="freemarker">templates/already-enrolled-errorpage.ftl</result>
        </action>
        <action name="test-already-started-errorpage">
            <result type="freemarker">templates/test-already-started-errorpage.ftl</result>
        </action>
        <action name="generic-errorpage">
            <result type="freemarker">templates/generic-errorpage.ftl</result>
        </action>
    </package>
</struts>